<html>

<head>
    <title>HanziGraph</title>
    <meta charset="utf-8">
    <meta name="description"
        content="Learn Chinese by exploring the relationships between characters alongside examples that illustrate their use.">
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/cytoscape/3.19.1/cytoscape.min.js"
        integrity="sha512-REr7ZKldLo2Lx6UiQ6autPWZR+j4u1/7ElYsrcwFe3ZmT/TKXCF/vXqNP/d2BQ78k0tapdZFccpFkku9bwrS3w=="
        crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <script type="module" src="./js/modules/init.js"></script>
    <!--TODO safari appeared not to support await-->
    <script src="./data/hanzi.js"></script>
    <script src="./data/sentences.js"></script>
    <script src="./data/definitions.js"></script>
    <link rel="stylesheet" type="text/css" href="css/hanzi-graph.css">
    <link rel="manifest" href="./manifest.json">
    <link rel="icon" href="images/favicon-32x32.png" type="image/x-icon">
    <link rel="apple-touch-icon" href="images/apple-touch-icon.png">
</head>

<body>
    <div id="container">
        <!-- lol, like control plane -->
        <div id="control-pane">
            <header class="header">
                <div class="menu-container">
                    <label id="menu-button" for="menu-toggle">
                        <i class="menu-expand"></i>
                    </label>
                </div>
                <!--TODO get rid of this ID-->
                <h1 id="main-header" class="main-header">HanziGraph</h1>
                <div class="stats-container"><a id="stats-show"><i class="stats-button"></i></a></div>
            </header>
            <input id="menu-toggle" type="checkbox" style="display: none;" />
            <div class="menu">
                <div id="signin" class="menu-item">
                    <a id="signin-button" class="authn-button" href="login.html">Sign in</a>
                    <a id="signout-button" class="authn-button" style="display:none">Sign out</a>
                </div>
                <div class="menu-item">
                    <label class="menu-item-text" for="level-selector">Choose max HSK level in the graph:</label>
                    <select id="level-selector">
                        <option>1</option>
                        <option>2</option>
                        <option>3</option>
                        <option>4</option>
                        <option>5</option>
                        <option selected>6</option>
                    </select>
                </div>
                <div class="menu-item">
                    <label id="toggle-pinyin-label" class="menu-item-text" for="show-pinyin">
                        Turn on pinyin in examples
                    </label>
                </div>
                <div class="menu-item">
                    <span class="menu-item-text">Recommendations:</span>
                    <label for="recommendations-difficulty" class="menu-item-subtext">
                        show me
                        <select id="recommendations-difficulty">
                            <option selected>any</option>
                            <option>easy</option>
                            <option>hard</option>
                        </select>
                        hanzi</label>
                </div>
            </div>
            <div class="tabs">
                <div id="show-explore" class="tab active">Explore</div>
                <div id="show-study" class="tab">Study</div>
            </div>
            <div id="example-container">
                <div id="controls">
                    <form id="hanzi-choose" class="control">
                        <!-- i18n? what's that? -->
                        <label for="hanzi-box">Choose a hanzi:</label>
                        <input id="hanzi-box" type="text" maxlength="1" />
                        <input type="submit" value="Go!" />
                    </form>
                    <div class="control center">
                        <span class="text-button" id="previousHanziButton">Previous Hanzi</span>
                    </div>
                </div>
                <div id="recommendations-container" class="recommendations" style="display:none"></div>
                <input id="show-pinyin" type="checkbox" style="display:none" />
                <ul id="examples">
                    <li class="walkthrough">
                        <!-- i18n :-( -->
                        <p>
                            To begin, enter a hanzi above, or explore the example.
                            You can click on hanzi or the lines that connect them.
                            Example sentences will appear here!
                        </p>
                        <p>
                            Examples can be exported into your flashcard app of choice (e.g., Anki).
                            Simply click the "Add to study list" button on whichever words you'd like,
                            and then the "Export" button once you're done, for
                            an import-ready download.
                        </p>
                        <p>
                            Circles (nodes) correspond to individual hanzi characters.
                        </p>
                        <p>
                            Connecting lines (edges) represent a relationship among hanzi.
                            Namely, by connecting the two linked hanzi, a word can be formed
                            (or partially formed in the case of 3+ character words).
                        </p>
                        <p style="font-weight:bold">
                            Both lines and circles can be clicked!
                        </p>
                        <p>
                            Note that you can also zoom, drag, and re-arrange the diagram however you please.
                        </p>
                        <p>
                            <a href="faq.html">See the FAQ for more information.</a>
                        </p>
                    </li>
                </ul>
            </div>
            <div id="study-container" style="display:none">
                <p id="explain-text">Not sure how this works? <a class="faq-link" id="show-study-faq">Learn
                        more.</a></p>
                <p>
                    Cards due: <span id="card-due-count"></span>
                    <span class="text-button" id="exportStudyListButton">Export study list</span>
                </p>
                <p id="study-call-to-action" class="study-call-to-action">
                    <span id="task-description">What does the sentence or word below mean?</span>
                    <span id="task-complete">Studying complete. Check back later for more reviews. <br />You can also
                        add more cards by exploring the graph!</span>
                </p>
                <p id="card-question-container"></p>
                <span id="show-answer-button" class="study-call-to-action">Show Answer</span>
                <div id="card-answer-container" style="display:none">
                    <p id="card-answer"></p>
                    <ul id="result-buttons">
                        <li id="wrong-button">I didn't know that</li>
                        <li id="right-button">I knew that!</li>
                    </ul>
                    <p id="delete-card-button" class="text-button">Delete this card</p>
                </div>
            </div>
            <div id="legend">
                <p>
                    The color of a given hanzi or connection indicates the level at which it first appears in the HSK
                    exam.
                </p>
                <div id="level-container">
                    <div class="circle" style="background:red">HSK1</div>
                    <div class="circle" style="background:orange">HSK2</div>
                    <div class="circle" style="background:yellow">HSK3</div>
                    <div class="circle" style="background:green;color:white">HSK4</div>
                    <div class="circle" style="background:purple;color:white">HSK5</div>
                    <div class="circle" style="background:blue;color:white">HSK6</div>
                </div>
            </div>
        </div>
        <div id="graph"></div>
    </div>
    <script type="module" src="./js/modules/auth-state.js"></script>
    <div id="stats-container" style="display:none">
        <header class="header">
            <div class="exit-container"><i id="exit-button" class="exit-arrow"></i></div>
            <h1 class="main-header">HanziGraph</h1>
            <div class="stats-container"></div>
        </header>
        <main class="stats">
            <section>
                <div id="visited-container" style="display:none">
                    <h2>Hanzi Seen</h2>
                    <p>You've viewed examples at some point for:</p>
                    <div id="visited-graph"></div>
                    <p id="visited-graph-detail">Click a bar in the chart for details.</p>
                </div>
                <p>You've studied examples at some point for:</p>
                <div id="studied-graph"></div>
                <p id="studied-graph-detail">Click a bar in the chart for details.</p>
            </section>
            <section>
                <h2>Study Stats</h2>
                <div id="study-calendar-container" style="display: none;">
                    <p>Study stats by day:</p>
                    <div id="study-calendar"></div>
                    <p id='study-calendar-detail'>Click a box in the calendar for details. Darker colors mean more
                        studying.
                    </p>
                </div>
                <p>Characters added, last 10 days:</p>
                <p id='added-graph-detail'>Click a bar in the chart for details.</p>
                <div id="added-graph"></div>
                <p>Cards added by day:</p>
                <div id="added-calendar"></div>
                <p id='added-calendar-detail'>Click a box in the calendar for details. Darker colors mean more cards
                    added.
                </p>
                <div id="hourly-container" style="display: none;">
                    <p>Study stats by hour:</p>
                    <p id='hourly-graph-detail'>Click a bar in the chart for details. <br />Green: 75% correct or
                        better.
                        Yellow:
                        between 50% and 75%. Orange: between 25% and 50%. Red: less than 25% correct.</p>
                    <div id="hourly-graph"></div>
                </div>
            </section>
        </main>
    </div>
    <div id="faq-container" style="display:none">
        <header class="header">
            <div class="exit-container"><i id="faq-exit-button" class="exit-arrow"></i></div>
            <h1 class="main-header">HanziGraph</h1>
            <div class="stats-container"></div>
        </header>
        <main class="faq">
            <section id="faq-study-mode" style="display:none">
                <ul>
                    <li>
                        <h3>How does this work?</h3>
                        <ul>
                            <li>When you add words to your study list, they will be presented to you as flashcards.
                                You&#39;ll
                                be
                                shown the sentence and asked what it means; click &quot;Show Answer&quot; to see how
                                tatoeba
                                translated it. When you click &quot;I didn&#39;t know that&quot;, the card will be added
                                back to
                                the
                                end of your to-study list. When you click &quot;I knew that!&quot;, it will be shown one
                                day
                                later,
                                then two days if you get it right again, then four, and so on. It is meant to be a very,
                                very
                                basic
                                <a href="https://en.wikipedia.org/wiki/Spaced_repetition">spaced repetition system</a>.
                            </li>
                        </ul>
                    </li>
                    <li>
                        <h3>What does the export button do?</h3>
                        <ul>
                            <li>The export button downloads a file that can be imported into a different (better) spaced
                                repetition
                                system, like Anki.</li>
                        </ul>
                    </li>
                    <li>
                        <h3>What happens when I click a hanzi in study mode?</h3>
                        <ul>
                            <li>The graph will be updated to show the hanzi you clicked and its connections. The explore
                                panel
                                is
                                also updated. </li>
                        </ul>
                    </li>
                    <li>
                        <h3>What happens when I click an edge in study mode?</h3>
                        <ul>
                            <li>If you click an edge, the examples are updated and you&#39;ll be brought back to the
                                explore
                                tab.
                            </li>
                        </ul>
                    </li>
                    <li>
                        <h3>Where are the flashcards stored?</h3>
                        <ul>
                            <li>When you are not signed in: all data for the site is stored in <a
                                    href="https://developer.mozilla.org/en-US/docs/Web/API/Window/localStorage">localStorage</a>.
                                It
                                does not leave your browser, and clearing your browser data will clear it.</li>
                            <li>When you are signed in: the data is stored on our backend, and should be present and
                                up-to-date
                                on
                                any device. If you add flashcards while signed out, then sign in or register later, the
                                two
                                lists
                                will be merged, so you shouldn&#39;t lose anything.</li>
                        </ul>
                    </li>
                </ul>
            </section>
            <section id="faq-single-char-warning" style="display:none">
                <ul>
                    <li>
                        <h3>Why are the examples for certain characters a little strange?</h3>
                        <ul>
                            <li>Some characters are not commonly used alone. The examples use a process called <a
                                    href="https://nlp.stanford.edu/IR-book/html/htmledition/tokenization-1.html">tokenization</a>
                                to
                                split the sentences into individual words. For example, 他是非常好 might be split into words
                                like: 他,
                                是,
                                非常, 好, so searching for 非 by itself would not match. Future updates might show any
                                sentences that contain the character, even if
                                it&#39;s used
                                as
                                part of another word.</li>
                        </ul>
                    </li>
                </ul>
            </section>
            <section id="faq-recommendations" style="display:none">
                <ul>
                    <li>
                        <h3>How do recommendations work?</h3>
                        <ul>
                            <li>Recommendations are based on what hanzi you&#39;ve already viewed examples for.
                                For instance, if you&#39;ve viewed examples for 下午 and 上午,
                                but you haven&#39;t yet visited 中, we might
                                recommend you visit 中, since 中午 is common, and you&#39;ve seen 午 in several contexts,
                                which might make it easier to remember 中.
                            </li>
                        </ul>
                    </li>
                    <li>
                        <h3>How can I stop seeing so many HSK1 recommendations?</h3>
                        <ul>
                            <li>You can choose via the menu in the upper left. The choice of &#39;easy&#39; means
                                you&#39;ll not be shown anything harder than HSK3. The choice of &#39;hard&#39; means
                                you&#39;ll only be shown HSK4-HSK6 hanzi.
                            </li>
                        </ul>
                    </li>
                </ul>
            </section>
        </main>
    </div>
    <script type="module" src="./js/modules/study-mode.js"></script>
    <script type="module" src="./js/modules/base.js"></script>
    <script type="module" src="./js/modules/main.js"></script>
</body>

</html>